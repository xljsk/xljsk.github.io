(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63e8a4ca"],{"0ff7":function(t,e,s){},"16ae":function(t,e,s){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal"},[e("div",{staticClass:"personal-left"},[e("Avatar",{attrs:{avatarSize:60,userId:t.userInfo.customerId,isShowNickname:!0,nicknameBoxStyle:{marginLeft:"20px",fontSize:"18px",fontWeight:500,color:"#3D3D3D",cursor:"pointer"}}})],1)])},i=[],n=s("2f62"),a=s("df3a"),r={name:"WorkspaceJsonPersonalInformation",components:{Avatar:a["a"]},data(){return{prefixUrl:"https://bandex-dev.oss-cn-shenzhen.aliyuncs.com",infoData:{}}},mounted(){},computed:{...Object(n["d"])(["userInfo"])},methods:{}},c=r,h=(s("60df"),s("2877")),l=Object(h["a"])(c,o,i,!1,null,"317850e0",null);e["a"]=l.exports},"1a79":function(t,e,s){},"28f4":function(t,e,s){},"5c6cc":function(t,e,s){"use strict";s("0ff7")},"60df":function(t,e,s){"use strict";s("28f4")},"8e4c":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrap"},[e("div",{staticClass:"content-wrap-left"},[e("div",{staticClass:"content-wrap-hd"},[t.token?e("PersonalInformation",{attrs:{isLeader:t.isLeader}}):t._e()],1),e("PostList")],1),e("div",{staticClass:"content-wrap-right",attrs:{id:"right"}},[e("div",{class:{"right-position":t.isFixed,"right-hotposition":t.isHotFixed},attrs:{id:"rightwrap"}},[e("SearchHot"),e("HotPost")],1)])])},i=[],n=s("2f62"),a=s("16ae"),r=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",[t._l(t.showList,(function(s,o){return e("div",{key:s.id,staticClass:"wrap",on:{click:function(e){return t.$router.push(`/community/community-post/${s.id}/${s.author}`)}}},[e("Post",{attrs:{item:s,index:o},on:{handle:t.handle}})],1)})),0==t.showList.length?e("el-empty",{attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}}):e("div",{staticClass:"load-more"},[t._v(t._s(t.totalRows===t.showList.length?t.$t("notice_copy_over"):t.$t("notice_copy_load_more"))+" ")])],2)}),c=[],h=s("bd46"),l={name:"WorkspaceJsonPostList",components:{Post:h["a"]},data(){return{prefixUrl:"https://bandex-dev.oss-cn-shenzhen.aliyuncs.com",page:1,size:10,totalRows:0,showList:[],isLoadingNextPage:!1,hasMore:!1,change:0}},computed:{...Object(n["d"])(["token","userInfo","community"])},watch:{community(t){this.hasMore=!1,4===t&&this.getPostDynamic(!0),window.scrollTo(0,0)}},mounted(){4===this.community&&this.getPostDynamic(!0),window.addEventListener("scroll",this.scrollBottom)},destroyed(){window.removeEventListener("scroll",this.scrollBottom)},methods:{scrollBottom(){let t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.scrollHeight||document.body.scrollHeight;e-t<=2700&&this.isLoadingNextPage&&(4===this.community&&this.getPostDynamic(!1),this.isLoadingNextPage=!1)},handle(t,e){if(0===t)for(let s of this.showList)s.id==e&&(s.isLike=!1,s.up=s.up-1);if(1===t)for(let s of this.showList)s.id==e&&(s.isLike=!0,s.up=s.up+1);if(2===t)for(let s of this.showList)s.author==e&&(s.isFollow=!0);if(3===t)for(let s of this.showList)s.author==e&&(s.isFollow=!1)},async getPostDynamic(t){if(t&&(this.page=1),!this.hasMore)try{const e=await this.$api.community.getPostDynamic({page:this.page,size:this.size,userId:this.userInfo.customerId});if(e.success&&e.obj.data){let s=e.obj.data;if(this.totalRows=e.obj.totalRows,1===this.page&&0===s.length)return this.showList=s;s.length>0&&this.handleData(s,t),this.page*this.size<=this.totalRows&&(this.page=this.page+1),s.length<this.size&&(this.hasMore=!0)}}catch(e){this.$handleError.handleApiRequestException(e)}},async handleData(t,e){if(t.forEach(t=>{if(t.attachContent){let e=JSON.parse(t.attachContent),s=[];e&&(e.map(e=>{1===e.type&&(t.href=this.$utils.decodeURIComponentSafely(e.url)),2===e.type&&s.push(this.prefixUrl+e.url),3===e.type&&(t.videoUrl=e.url)}),s.length&&(t.urls=s))}}),t.length>0){const s=await this.checkIsLikeTrends(t);for(let e of t)for(let t in s)e.id==t&&(e.isLike=s[t]);const o=await this.checkIsFollow(t);for(let e of t)for(let t in o)e.author==t&&(e.isFollow=o[t]);this.showList=e?t:this.showList.concat(t),this.isLoadingNextPage=!0}},async checkIsLikeTrends(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let o of t)e.push(o.id);const s=await this.$api.community.checkIsLikeTrends({trendsIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async checkIsFollow(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let o of t)e.push(o.author);const s=await this.$api.community.checkIsFollow({userIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}}}},d=l,u=(s("5c6cc"),s("2877")),f=Object(u["a"])(d,r,c,!1,null,"1cdbd494",null),p=f.exports,m=s("1943"),g=s("e671"),w={name:"WorkspaceJsonIndex",components:{PersonalInformation:a["a"],PostList:p,SearchHot:m["a"],HotPost:g["a"]},data(){return{screenHeight:"",isFixed:!1,isHotFixed:!1,offsetTop:20,rightHeight:0,isLeader:!1}},computed:{...Object(n["d"])(["token","userInfo"])},mounted(){window.addEventListener("scroll",this.initHeight),this.screenHeight=document.body.clientHeight,window.onresize=()=>(()=>{this.screenHeight=document.body.clientHeight})()},destroyed(){window.removeEventListener("scroll",this.initHeight)},methods:{initHeight(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.isHotFixed=t>20}}},y=w,L=(s("fb39"),Object(u["a"])(y,o,i,!1,null,"7be96570",null));e["default"]=L.exports},fb39:function(t,e,s){"use strict";s("1a79")}}]);