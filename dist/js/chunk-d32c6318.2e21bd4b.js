(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d32c6318"],{"2fa8":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"face"},[e("div",{staticClass:"interaction"},[e("div",{staticClass:"interaction-head"},[t._v(t._s(t.$t("toast_interact_message1"))+"("+t._s(t.total)+")")]),t._l(t.dataList,(function(t,s){return e("div",{key:s},[e("interactionList",{attrs:{item:t}})],1)})),0==t.dataList.length?e("el-empty",{attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}}):t._e()],2),e("div",{staticClass:"paging"},[e("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.size,"hide-on-single-page":!t.dataList.length},on:{"current-change":t.handleCurrentChange}})],1)])},a=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post",on:{click:function(e){return t.detailPush(t.item)}}},[e("div",{staticClass:"personal"},[e("div",{staticClass:"personal-left"},[e("Avatar",{attrs:{avatarSize:40,userId:t.item.userInfo,isShowNickname:!0,nicknameBoxStyle:{marginLeft:"10px",color:"#303330"}}},[e("div",{staticClass:"personal-style",attrs:{slot:"bottom"},slot:"bottom"},[t._v(" "+t._s(t._f("relativeTime")(t.item.created))+t._s(t.item.desc)+" ")])])],1)]),e("div",{staticClass:"post-content"},[e("span",[e("EditParse",{attrs:{content:"SPEC_REMINDER"==t.item.outMsgType?t.item.msgBody.content:t.item.msgBody.body.content||t.item.msgBody.body.comment}})],1)]),t.item.href?e("div",{staticClass:"post-link",on:{click:function(e){return e.stopPropagation(),t.openUrl(t.item.href)}}},[e("img",{staticClass:"link-img",attrs:{src:t.handleLink(t.item.msgBody.attachContent).imgUrl||t.base64Avatar}}),e("div",[t.handleLink(t.item.msgBody.attachContent).title?e("div",{staticClass:"link-title"},[t._v(t._s(t.handleLink(t.item.attachContent).title))]):t._e(),t.handleLink(t.item.msgBody.attachContent).description?e("div",{staticClass:"link-des"},[t._v(t._s(t.handleLink(t.item.msgBody.attachContent).description))]):t._e(),t.handleLink(t.item.msgBody.attachContent).description?t._e():e("div",{staticClass:"link-detail"},[t._v(t._s(t.item.href.trim()))])])]):t._e(),e("div",[e("Album",{attrs:{imgs:t.item.urls}})],1),t.item.videoUrl?e("div",{staticClass:"post-video",on:{click:function(t){t.stopPropagation()}}},[e("video",{staticClass:"video",attrs:{onclick:"fun(event)",controls:"controls",src:t.item.videoUrl,id:t.item.id},on:{play:function(e){return t.handlePlay(t.item.id)}}})]):t._e(),t.item.msgBody.comment?e("div",{staticClass:"post-reply"},[t._v(" "+t._s(t.$t("community_reply"))+"ï¼š "+t._s(t.item.msgBody.comment)+" ")]):t._e()])},o=[],r=(s("14d9"),s("f4053")),d=s("2f62"),m=s("df3a"),c={name:"WorkspaceJsonPostList",components:{Album:r["a"],Avatar:m["a"]},props:["item"],computed:{...Object(d["d"])(["token","userInfo"])},data(){return{flag:!1,imgs:["https://img0.baidu.com/it/u=2810806728,4166654119&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500","https://img0.baidu.com/it/u=2066710797,1295269268&fm=253&fmt=auto&app=120&f=JPEG?w=1422&h=800","https://img0.baidu.com/it/u=950234826,2310429801&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=725"],videoElement:[],base64Avatar:""+s("69a8")}},mounted(){this.videoElement=document.getElementsByTagName("video")},methods:{detailPush(t){console.log("detailPush",t),"SPEC_REMINDER"==t.outMsgType&&this.getTrendsInfo(t.msgBody.id,t.msgBody),1!==t.msgBody.commentType&&1!==t.msgBody.likeType||this.getTrendsInfo(t.msgBody.body.id,t.msgBody),2!==t.msgBody.commentType&&2!==t.msgBody.likeType||this.getTrendsInfo(t.msgBody.body.trendsId,t.msgBody)},handleLink(t){try{if(t){const e=JSON.parse(t),s=e[0];return s.urlWebCard?s.urlWebCard:{}}return{}}catch(e){return console.warn(e),{}}},async getTrendsInfo(t,e){const s=await this.$api.community.getTrendsInfo({trendsId:t});if(s.success){if(null===s.obj)return this.$notify({type:"warning",message:this.$t("community_post_delete")});this.$router.push(`/community/community-post/${t}/${e.body.author}`)}},async getCommentInfo(t,e){const s=await this.$api.community.getCommentInfo({commentId:t});if(s.success){if(s.obj.data.length<=0)return this.$notify({type:"warning",message:this.$t(s.code)});this.$router.push(`/community/community-post/${e.body.trendsId}/${e.body.userId}`)}},handlePlay(t){let e=document.getElementById(t).id;const s=this.videoElement;if(s&&s.length>0)for(let i=0;i<s.length;i++){let t=s[i].id;t===e?this.videoElement[i].play():this.videoElement[i].pause()}},openUrl(t){window.open(t)}}},l=c,u=(s("9342"),s("2877")),p=Object(u["a"])(l,n,o,!1,null,"1de3b59e",null),g=p.exports,h={name:"",components:{interactionList:g},props:{},data(){return{prefixUrl:"https://bandex-dev.oss-cn-shenzhen.aliyuncs.com",dataList:[],size:5,pageNo:1,total:0,isLoadingNextPage:!1}},computed:{},watch:{},mounted(){this.messageReminderList()},destroyed(){},methods:{handleCurrentChange(t){this.pageNo=t,this.messageReminderList()},async messageReminderList(){try{const t=await this.$api.community.messageReminderList({outMsgType:"COMMUNITY_INTERACTION,SPEC_REMINDER",pageNo:this.pageNo,pageSize:this.size});if(t.success){let e=t.obj.obj;this.dataList=await this.handleData(e),this.total=t.obj.total,window.scrollTo(0,0)}}catch(t){this.$handleError.handleApiRequestException(t)}},async handleData(t){let e=t.map(async t=>{let e;if(t.msgBody=JSON.parse(t.msgBody),t.userInfo=t.msgBody.commentUserId||t.msgBody.likeUserId||t.msgBody.author,"SPEC_REMINDER"==t.outMsgType?t.desc="@":t.desc=this.handleTypeData(t.msgBody.commentType||t.msgBody.likeType+2),"COMMUNITY_INTERACTION"==t.outMsgType){if(!t.msgBody.body.attachContent)return t;e=JSON.parse(t.msgBody.body.attachContent)}else{if(!t.msgBody.attachContent)return t;e=JSON.parse(t.msgBody.attachContent)}return e&&0!=e.length?(1==e[0].type&&(t.href=this.$utils.decodeURIComponentSafely(e[0].url)),3==e[0].type&&(t.videoUrl=e[0].url),2==e[0].type&&(t.urls=e.map(t=>this.prefixUrl+"/"+t.url)),t):t});return e=await Promise.all(e),this.isLoadingNextPage=!0,e},handleTypeData(t){let e="";switch(t){case 1:e=this.$t("home_page_tab4");break;case 2:e=this.$t("community_reply");break;case 3:e=this.$t("home_page_tab3");break;case 4:e=this.$t("home_page_tab3");break;default:e=""}return e}}},y=h,f=(s("47dd"),Object(u["a"])(y,i,a,!1,null,"5f589a03",null));e["default"]=f.exports},"47dd":function(t,e,s){"use strict";s("e9b5")},6516:function(t,e,s){},"69a8":function(t,e,s){t.exports=s.p+"img/picture.ea369ff0.png"},8575:function(t,e,s){"use strict";s("c1d4")},9342:function(t,e,s){"use strict";s("6516")},c1d4:function(t,e,s){},e335:function(t,e,s){t.exports=s.p+"img/list.e55dcec1.png"},e9b5:function(t,e,s){},f4053:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"album-warp"},t._l(t.imgs,(function(s){return e("el-image",{key:s,class:"img-box "+t.className,attrs:{fit:"cover","preview-src-list":t.imgs,src:s},on:{click:function(t){t.stopPropagation()}}})})),1)},a=[],n={props:{imgs:{type:Array,default:()=>[]}},computed:{className(){let t="img-box-i";return 4===this.imgs.length||2===this.imgs.length?t="img-box-4":1===this.imgs.length&&(t="img-box-1"),t}},name:"Album"},o=n,r=(s("8575"),s("2877")),d=Object(r["a"])(o,i,a,!1,null,"4cc656a1",null);e["a"]=d.exports}}]);