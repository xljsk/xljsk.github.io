(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c25cd3e4"],{"266c":function(t,e,s){},"2ca5":function(t,e,s){"use strict";s("7dfc")},"2ef1":function(t,e,s){},"303e":function(t,e,s){"use strict";s("449c")},"33bc":function(t,e,s){},"3dac":function(t,e,s){"use strict";s("266c")},"449c":function(t,e,s){},"572c":function(t,e,s){},"634d":function(t,e,s){},"69a8":function(t,e,s){t.exports=s.p+"img/picture.ea369ff0.png"},"6f8b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"left"},[e("home-page-header",{attrs:{authorId:t.authorId,teamInfo:t.teamInfo,isLeader:t.isLeader,isLeaderArr:t.isLeaderArr},on:{toggleExchange:t.toggleExchange}}),e("div",{staticClass:"tabs-box"},[e("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.currentTabIndex,callback:function(e){t.currentTabIndex=e},expression:"currentTabIndex"}},t._l(t.tabList,(function(t){return e("el-tab-pane",{key:t.id,attrs:{label:t.name,name:String(t.id)}})})),1)],1),e("div",{staticClass:"middle"},[e("Follow",{directives:[{name:"show",rawName:"v-show",value:"0"==t.currentTabIndex,expression:"currentTabIndex == '0'"}],ref:"follow",attrs:{authorId:t.authorId,isLeader:t.isLeader,isLeaderArr:t.isLeaderArr}}),e("Activity",{directives:[{name:"show",rawName:"v-show",value:"1"==t.currentTabIndex,expression:"currentTabIndex == '1'"}],ref:"activity",attrs:{authorId:t.authorId}}),e("Like",{directives:[{name:"show",rawName:"v-show",value:"2"==t.currentTabIndex,expression:"currentTabIndex == '2'"}],ref:"like",attrs:{authorId:t.authorId}}),e("Comment",{directives:[{name:"show",rawName:"v-show",value:"3"==t.currentTabIndex,expression:"currentTabIndex == '3'"}],ref:"comment",attrs:{authorId:t.authorId}})],1)],1),e("div",{staticClass:"right"},[e("Position",{attrs:{authorId:t.authorId,isLeader:t.isLeader}}),e("AttentionList",{attrs:{authorId:t.authorId}})],1)])},a=[],o=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"top"},[e("div",{staticClass:"top-left"},[e("Avatar",{attrs:{userId:t.authorId,avatarSize:60,isShowNickname:!0,isGoPage:!1,isForceUpdate:!0,nicknameBoxStyle:"margin-left:18px;font-size:18px;color:var(--color-text-one)"}})],1),e("div",{staticStyle:{display:"flex"}},[t.isLeader?e("div",{staticStyle:{"margin-right":"20px"}},[e("ExchangeRadios",{attrs:{authorId:t.authorId,type:"1"},on:{change:t.toggleExchange}})],1):t._e(),t.authorId==t.userInfo.customerId&&t.isLeader?e("div",{staticClass:"top-right"},[e("el-dropdown",{on:{command:t.openDialog}},[e("span",[e("svg-icon",{attrs:{data_iconName:"live-streaming",className:"liveIcon",size:25}})],1),e("el-dropdown-menu",{staticClass:"dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.liveList,(function(s,i){return e("el-dropdown-item",{key:i,attrs:{command:s.id}},[t._v(t._s(s.value))])})),1)],1),e("span",{staticStyle:{"margin-left":"28px"},on:{click:t.edit}},[e("svg-icon",{attrs:{data_iconName:"setting",className:"liveIcon",size:25}})],1)],1):t._e(),t.authorId!=t.userInfo.customerId&&t.token?e("div",{staticClass:"top-right"},[e("div",{class:t.isFollow?"btn cancle":"btn active",on:{click:function(e){return t.$throttle(t.attention)}}},[t._v(t._s(t.isFollow?t.$t("home_page_unfollow"):t.$t("home_page_follow")))]),e("div",{staticClass:"btn letter",on:{click:()=>{t.$router.push({path:"/private-letter",query:{id:t.authorId}})}}},[t._v(" "+t._s(t.$t("letter_private_letter"))+" ")])]):t._e()])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLeader,expression:"isLeader"}]},[e("p",{staticClass:"middle-box"},[e("span",[t._v(t._s(t.$t("home_page_minPrice"))+"：")]),e("span",[t._v("₮ "+t._s(t._f("P")(t.teamInfo.minJoinAsset)))])]),e("p",{staticClass:"middle-box"},[e("span",[t._v(t._s(t.$t("home_page_transactions_number"))+"：")]),e("span",[t._v(t._s(t.teamInfo.totalOrders))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isLeader,expression:"isLeader"}],staticClass:"bottom"},[e("div",{staticClass:"bottom-item"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home_page_total_revenue")))]),e("div",{staticClass:"val"},[t._v("₮ "+t._s(t._f("P")(t.teamInfo.totalProfit)))])]),e("div",{staticClass:"bottom-item"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home_page_sharing")))]),e("div",{staticClass:"val"},[t._v(t._s(100*Number(t.teamInfo.userProfitShareRatio))+"%")])]),e("div",{staticClass:"bottom-item",staticStyle:{"text-align":"right"}},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home_page_yield")))]),e("div",{staticClass:"val"},[t._v(t._s(t.teamInfo.profitRate30d)+"%")])])]),e("liveDialog",{attrs:{dialogVisibled:t.isShowDialog,liveType:t.liveType},on:{close:t.closeDialog}})],1)}),n=[],r=s("2f62"),c=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:t.$t("home_page_live_setting"),visible:t.isShowDialog,width:"420px","before-close":t.handleClose,center:!0},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("p",{staticClass:"title"},[t._v(t._s(t.$t("home_page_live_type")))]),e("div",{staticClass:"select-box"},[e("el-select",{attrs:{placeholder:t.$t("home_page_type_placeholder")},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeOption,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("p",{staticClass:"title"},[t._v(t._s(t.$t("home_page_add_live_poster")))]),e("div",{staticClass:"upload-box"},[t.imgUrl?e("div",{staticClass:"img-box"},[e("el-image",{staticClass:"img",attrs:{src:t.imgUrl}}),e("div",{staticClass:"img-btn",on:{click:t.deleteImg}},[t._v(t._s(t.$t("home_page_delete")))])],1):e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,limit:1,"show-file-list":!1,multiple:"","on-change":t.handleChange}},[e("div",{staticClass:"img"},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"btn",attrs:{slot:"trigger"},slot:"trigger"},[t._v(t._s(t.$t("home_page_upload_img")))])])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"2"==t.liveType,expression:"liveType == '2'"}]},[e("p",{staticClass:"title"},[t._v(t._s(t.$t("home_page_live_time")))]),e("el-date-picker",{staticClass:"date-picker",attrs:{type:"datetime",placeholder:t.$t("home_page_select_date")},model:{value:t.liveTime,callback:function(e){t.liveTime=e},expression:"liveTime"}})],1),e("p",{staticClass:"title"},[t._v(t._s(t.$t("home_page_set_live_theme")))]),e("el-input",{staticClass:"live-theme",attrs:{placeholder:t.$t("home_page_live_placeholder"),maxlength:"20"},model:{value:t.liveTheme,callback:function(e){t.liveTheme=e},expression:"liveTheme"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.typeValue,expression:"typeValue == 1"}]},[e("p",{staticClass:"title"},[t._v(t._s(t.$t("home_page_out_link")))]),e("el-input",{staticClass:"live-theme",attrs:{placeholder:t.$t("home_page_out_link_placeholder")},model:{value:t.outLink,callback:function(e){t.outLink=e},expression:"outLink"}})],1),e("p",{staticClass:"title"},[t._v(t._s(t.$t("home_page_set_live_content")))]),e("el-input",{staticClass:"live-content",attrs:{type:"textarea",placeholder:t.$t("home_page_live_placeholder1"),maxlength:"100","show-word-limit":"",rows:"3"},model:{value:t.liveContent,callback:function(e){t.liveContent=e},expression:"liveContent"}}),e("div",{staticClass:"button",on:{click:function(e){return t.$throttle(t.onSubmit)}}},[t._v(t._s(1==t.liveType?t.$t("home_page_open_live"):t.$t("home_page_reserve")))])],1)],1)},l=[],h=s("6ca8"),d=s.n(h),m={name:"live-dialog",props:{dialogVisibled:{type:Boolean,default:!1},liveType:{type:String,default:"1"}},data(){return{dialogVisible:this.dialogVisibled,liveContent:"",liveTheme:"",liveCover:"",imgUrl:"",srcList:[],liveTime:"",typeOption:[{label:this.$t("home_page_live_graphic"),value:0},{label:this.$t("home_page_live_video"),value:1}],typeValue:"",outLink:""}},computed:{isShowDialog(){return this.dialogVisibled}},mounted(){},methods:{deleteImg(){this.imgUrl=""},handleChange(t,e){const s=t.size/1024/1024<4;if(!s)return this.$refs.upload.handleRemove(t,e),void this.$notify({type:"warning",message:this.$t("home_page_size_more")});let i=t.name.split(".")[t.name.split(".").length-1];if("jpg"!==i&&"png"!==i&&"jpeg"!==i&&"bmp"!=i)return this.$refs.upload.handleRemove(t,e),void this.$notify({type:"warning",message:this.$t("home_page_format")});this.imgUrl=URL.createObjectURL(t.raw),this.srcList=[this.imgUrl],this.file=t},compression(){d()(this.file.raw,{quality:.5}).then(t=>{t.base64&&this.uploadApi(t.formData)})},async uploadApi(t){try{const e=await this.$api.mine.uploadApi(t);e.success&&(this.liveCover=e.obj[0],this.openLive())}catch(e){this.$handleError.handleApiRequestException(e)}},async onSubmit(){""!==this.typeValue?""!=this.imgUrl?2!=this.liveType||""!=this.liveTime?1!=this.typeValue||""!=this.outLink?""!=this.liveTheme?""!=this.liveContent?this.compression():this.$notify({type:"warning",message:this.$t("home_page_empty3")}):this.$notify({type:"warning",message:this.$t("home_page_empty2")}):this.$notify({type:"warning",message:this.$t("live_outLink_notEmpty")}):this.$notify({type:"warning",message:this.$t("home_page_empty4")}):this.$notify({type:"warning",message:this.$t("home_page_empty1")}):this.$notify({type:"warning",message:this.$t("live_type_notEmpty")})},async openLive(){let t;t="1"===this.liveType?await this.$api.community.communityCreateLiveNow({liveShowType:this.typeValue,cover:this.liveCover,theme:this.liveTheme,desc:this.liveContent,videoShowAddress:1==this.typeValue?this.outLink:""}):await this.$api.community.communityCreateLive({liveShowType:this.typeValue,cover:this.liveCover,theme:this.liveTheme,startTime:this.$dayjs(this.liveTime).valueOf(),desc:this.liveContent,videoShowAddress:1==this.typeValue?this.outLink:""}),"1"===this.liveType&&1!=this.typeValue?t.success&&(this.$notify({type:"success",message:this.$t(t.code)}),this.$router.replace({path:`/live-room?conversationId=${t.obj.conversationId}&creator=${t.obj.creator}&id=${t.obj.id}&type=live`})):this.$router.replace({path:"/live"})},handleClose(){this.imgUrl="",this.liveContent="",this.liveTheme="",this.$emit("close")}}},u=m,p=(s("fe6a"),s("2877")),v=Object(p["a"])(u,c,l,!1,null,"5b6a7f55",null),g=v.exports,_=s("d31a"),f={name:"home-page-header",components:{liveDialog:g,ExchangeRadios:_["a"]},props:{authorId:{type:Number,default:0},teamInfo:{type:Object},isLeader:{type:Boolean},isLeaderArr:{type:Array}},data(){return{isShowDialog:!1,liveType:"1",isFollow:!1,liveList:[{value:this.$t("home_page_live"),id:"1"},{value:this.$t("home_page_live_preview"),id:"2"}],exchangeName:"Binance"}},watch:{isLeaderArr(t){for(const e of t){if("binance"==e.name&&e.key)return void(this.exchangeName="Binance");this.exchangeName="OKX"}}},mounted(){this.$nextTick(()=>{this.checkIsFollow()})},computed:{...Object(r["d"])({userInfo:t=>t.userInfo,token:"token"})},methods:{getLeader(t){let e=null;if(this.isLeaderArr.length>0)for(const s of this.isLeaderArr)s.name==t&&(e=s.key);return e},openDialog(t){this.liveType=t,this.isShowDialog=!0},closeDialog(){this.isShowDialog=!1},edit(){this.$router.push("/mine/account-overview")},toggleExchange(t){this.$debounce(()=>{this.$emit("toggleExchange",t)})},async checkIsFollow(){try{if(!this.token)return;const t=await this.$api.community.checkIsFollow({userIds:String(this.authorId)});t.success&&(this.isFollow=t.obj[this.authorId])}catch(t){this.$handleError.handleApiRequestException(t)}},async attention(){this.isFollow?this.cancelFollow():this.follow()},async follow(){try{const t=await this.$api.community.follow({followUserId:this.authorId});t.success&&(t.success&&(this.isFollow=!0),this.$notify({message:this.$t("home_page_follow_success"),type:"success"}))}catch(t){this.$handleError.handleApiRequestException(t)}},async cancelFollow(){try{const t=await this.$api.community.cancelFollow({followUserId:this.authorId});t.success&&(this.isFollow=!1,this.$notify({message:this.$t("home_page_cancle_follow_success"),type:"success"}))}catch(t){this.$handleError.handleApiRequestException(t)}}}},y=f,b=(s("3dac"),Object(p["a"])(y,o,n,!1,null,"3b4a6b79",null)),k=b.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t._l(t.dataList,(function(s,i){return e("div",{key:s.id,staticClass:"post-box",on:{click:function(e){return e.stopPropagation(),t.goDetail(s)}}},[e("div",{staticClass:"post-box-top"},[e("div",{staticClass:"post-box-left"},[e("Avatar",{attrs:{userId:s.author,avatarSize:42,isShowNickname:!0,isGoPage:!1,nicknameBoxStyle:"margin-left:10px;font-size:14px"}},[e("div",{staticClass:"time",attrs:{slot:"bottom"},slot:"bottom"},[t._v(t._s(t._f("relativeTime")(s.created)))])])],1),e("DeletePost",{directives:[{name:"show",rawName:"v-show",value:t.token&&s.author==t.userInfo.customerId,expression:"token && item.author == userInfo.customerId"}],attrs:{deleteId:s.id},on:{confirm:function(e){return t.confirm(i)}}})],1),e("div",{staticClass:"post-box-content"},[s.content?e("EditParse",{attrs:{content:s.content,isHide:!0}}):t._e()],1),s.urls?e("div",{staticClass:"imgBox"},[e("Album",{attrs:{imgs:s.urls}})],1):t._e(),s.videoUrl?e("div",{staticClass:"post-video",on:{click:function(t){t.stopPropagation()}}},[e("video",{staticClass:"video",attrs:{onclick:"fun(event)",controls:"controls",src:s.videoUrl,id:s.id},on:{play:function(e){return t.handlePlay(s.id)}}})]):t._e(),s.href?e("div",{staticClass:"post-link",on:{click:function(e){return e.stopPropagation(),t.openUrlModus(s.href)}}},[e("img",{staticClass:"link-img",attrs:{src:t.handleLink(s.attachContent).imgUrl||t.base64Avatar}}),e("div",[t.handleLink(s.attachContent).title?e("div",{staticClass:"link-title"},[t._v(t._s(t.handleLink(s.attachContent).title))]):t._e(),t.handleLink(s.attachContent).description?e("div",{staticClass:"link-des"},[t._v(t._s(t.handleLink(s.attachContent).description))]):t._e(),t.handleLink(s.attachContent).description?t._e():e("div",[t._v(t._s(s.href.trim()))])])]):t._e(),e("div",{staticClass:"post-box-bottom"},[e("div",{staticClass:"post-box-bottom-item",on:{click:function(e){return e.stopPropagation(),t.postLikeOrDislike(s)}}},[e("svg-icon",{class:{select:s.isLike},attrs:{data_iconName:"awesome",className:"follow-icon",size:16}}),e("span",{staticClass:"iconNum"},[t._v(t._s(s.up))])],1),e("div",{staticClass:"post-box-bottom-item"},[e("svg-icon",{attrs:{data_iconName:"comment1",className:"follow-icon",size:16}}),e("span",{staticClass:"iconNum"},[t._v(t._s(s.comments))])],1),e("div",{staticClass:"post-box-bottom-item"})])])})),0==t.dataList.length?e("div",{staticClass:"empty-box"},[e("el-empty",{staticStyle:{"min-height":"563px"},attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}})],1):e("div",{staticClass:"load-more"},[t._v(t._s(t.total===t.dataList.length?t.$t("notice_copy_over"):t.$t("notice_copy_load_more"))+" ")])],2)},$=[],w=s("f4053"),x={name:"activity",components:{Album:w["a"]},props:{authorId:{type:Number,default:0}},data(){return{page:1,size:10,total:0,dataList:[],hasMore:!0,isLoading:!1,videoElement:[],base64Avatar:""+s("69a8")}},computed:{...Object(r["d"])({userInfo:t=>t.userInfo,token:"token"})},mounted(){this.videoElement=document.getElementsByTagName("video")},methods:{confirm(t){this.dataList.splice(t,1)},handlePlay(t){let e=document.getElementById(t).id;const s=this.videoElement;if(s&&s.length>0)for(let i=0;i<s.length;i++){let t=s[i].id;t===e?this.videoElement[i].play():this.videoElement[i].pause()}},openUrlModus(t){window.open(t)},goDetail(t){this.$router.push(`/community/community-post/${t.id}/${t.author}`)},postLikeOrDislike(t){this.$store.state.token?1===t.postLikesType?(this.likeId=t.trendsId,t.isLike?this.$throttle(this.cancelLike):this.$throttle(this.handleLike)):(this.likeId=t.id,t.isLike?this.$throttle(this.cancelLike):this.$throttle(this.handleLike)):this.$router.push("/login")},async cancelLike(){try{const t=await this.$api.community.cancelLike({trendsId:this.likeId,commentId:"",likeType:1,likeObj:1});if(t.success)for(const e of this.dataList)e.id==this.likeId&&(e.isLike=!1,e.up=e.up-1)}catch(t){this.$handleError.handleApiRequestException(t)}},async handleLike(){try{const t=await this.$api.community.communityLike({trendsId:this.likeId,commentId:"",likeType:1,likeObj:1});if(t.success){for(const t of this.dataList)t.id==this.likeId&&(t.isLike=!0,t.up=t.up+1);this.$notify({message:this.$t("community_liked_successfully"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async checkIsLikeTrends(t){try{if(!this.$store.state.token)return;const e=[];if(t&&t.length>0)for(let i of t)e.push(i.id);const s=await this.$api.community.checkIsLikeTrends({trendsIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},handleLink(t){try{const e=JSON.parse(t),s=e[0];return s.urlWebCard?s.urlWebCard:{}}catch(e){console.warn(e)}},async onGetList(t){try{if(this.isLoading||!this.hasMore)return;this.isLoading=!0;const a=await this.$api.community.getPostDynamic({page:this.page,size:this.size,userId:this.authorId});if(a.success){var e,s;if(null!==a&&void 0!==a&&null!==(e=a.obj)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.length){var i;const e=(null===a||void 0===a||null===(i=a.obj)||void 0===i?void 0:i.data)||[];if(e.length>0){const t=await this.checkIsLikeTrends(e);for(let s of e)for(let e in t)s.id==e&&(s.isLike=t[e])}this.total=a.obj.totalRows,this.dataList=t?e:this.dataList.concat(e),this.dataList.forEach(t=>{let e=JSON.parse(t.attachContent),s=[];e&&(e.map(e=>{1===e.type?t.href=this.$utils.decodeURIComponentSafely(e.url):2===e.type?s.push(this.$getEnv("VUE_APP_ALIOSS_URL")+"/"+e.url):3===e.type&&(t.videoUrl=e.url)}),s.length&&(t.urls=s))})}a.obj.data.length==this.size?this.page=this.page+1:this.hasMore=!1,this.isLoading=!1}}catch(a){this.$handleError.handleApiRequestException(a)}}}},L=x,C=(s("9977"),Object(p["a"])(L,I,$,!1,null,"616bb516",null)),E=C.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t._l(t.dataList,(function(s){return e("div",{key:s.id,staticClass:"post-box",on:{click:function(e){return e.stopPropagation(),t.goDetail(s)}}},[e("div",{staticClass:"post-box-top"},[e("div",{staticClass:"post-box-left"},[e("Avatar",{attrs:{userId:s.trendsAuthor,avatarSize:42,isShowNickname:!0,isGoPage:!1,nicknameBoxStyle:"margin-left:10px;font-size:14px"}},[e("div",{staticClass:"time",attrs:{slot:"bottom"},slot:"bottom"},[t._v(t._s(t._f("relativeTime")(s.created)))])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.token,expression:"token"}]},[s.trendsAuthor==t.userInfo.customerId?e("DeletePost",{attrs:{deleteId:s.id},on:{confirm:function(e){return t.confirm(t.index)}}}):e("Report",{attrs:{item:s,"is-post":!0}})],1)]),e("div",{staticClass:"post-box-content"},[s.content?e("EditParse",{attrs:{content:s.content,isHide:!0}}):t._e()],1),s.urls?e("div",{staticClass:"imgBox"},[e("Album",{attrs:{imgs:s.urls}})],1):t._e(),s.videoUrl?e("div",{staticClass:"post-video",on:{click:function(t){t.stopPropagation()}}},[e("video",{staticClass:"video",attrs:{controls:"controls",src:s.videoUrl,id:s.id},on:{play:function(e){return t.handlePlay(s.id)}}})]):t._e(),s.href?e("div",{staticClass:"post-link"},[e("img",{staticClass:"link-img",attrs:{src:t.handleLink(s.attachContent).imgUrl||t.base64Avatar}}),e("div",[t.handleLink(s.attachContent).title?e("div",{staticClass:"link-title"},[t._v(t._s(t.handleLink(s.attachContent).title))]):t._e(),t.handleLink(s.attachContent).description?e("div",{staticClass:"link-des"},[t._v(t._s(t.handleLink(s.attachContent).description))]):t._e(),t.handleLink(s.attachContent).description?t._e():e("div",[t._v(t._s(s.href.trim()))])])]):t._e(),e("div",{staticClass:"post-box-bottom"},[e("div",{staticClass:"post-box-bottom-item",on:{click:function(e){return e.stopPropagation(),t.postLikeOrDislike(s)}}},[e("svg-icon",{class:{select:s.isLike},attrs:{data_iconName:"awesome",className:"follow-icon",size:16}}),e("span",{staticClass:"iconNum"},[t._v(t._s(s.trendsUp))])],1),e("div",{staticClass:"post-box-bottom-item"},[e("svg-icon",{attrs:{data_iconName:"comment1",className:"follow-icon",size:16}}),e("span",{staticClass:"iconNum"},[t._v(t._s(s.trendsComments))])],1),e("div",{staticClass:"post-box-bottom-item"})])])})),0==t.dataList.length?e("div",{staticClass:"empty-box"},[e("el-empty",{staticStyle:{"min-height":"563px"},attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}})],1):e("div",{staticClass:"load-more"},[t._v(t._s(t.total===t.dataList.length?t.$t("notice_copy_over"):t.$t("notice_copy_load_more"))+" ")])],2)},A=[],N={name:"activity",components:{Album:w["a"]},props:{authorId:{type:Number,default:0}},data(){return{page:1,size:10,total:0,dataList:[],hasMore:!0,isLoading:!1,videoElement:[],followUserId:"",commentId:"",likeId:"",likeType:1,base64Avatar:""+s("69a8")}},mounted(){this.videoElement=document.getElementsByTagName("video")},computed:{...Object(r["d"])({userInfo:t=>t.userInfo,token:"token"})},methods:{confirm(t){this.dataList.splice(t,1)},handlePlay(t){let e=document.getElementById(t).id;const s=this.videoElement;if(s&&s.length>0)for(let i=0;i<s.length;i++){let t=s[i].id;t===e?this.videoElement[i].play():this.videoElement[i].pause()}},async handleCurrentChange(t){this.page=t,await this.onGetList(),window.scrollTo(0,0)},handleLink(t){try{const e=JSON.parse(t),s=e[0];return s.urlWebCard?s.urlWebCard:{}}catch(e){console.warn(e)}},goDetail(t){3!=t.trendsStatus?this.$router.push(`/community/community-post/${t.trendsId}/${t.trendsAuthor}`):this.$notify({message:this.$t("community_post_delete"),type:"warning"})},goCommentDetail(t){this.$router.push(`/community/reply/${t.commentId}/${t.commentAuthor}`)},onFollowClick(t){this.token?(this.followUserId=t.trendsAuthor,t.isFollow?this.$throttle(this.cancelFollow):this.$throttle(this.follow)):this.$router.push("/login")},async cancelFollow(){try{const t=await this.$api.community.cancelFollow({followUserId:this.followUserId});if(t.success){for(const t of this.dataList)this.followUserId==t.trendsAuthor&&(t.isFollow=!1);this.$notify({message:this.$t("home_page_cancle_follow_success"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async follow(){try{const t=await this.$api.community.follow({followUserId:this.followUserId});for(const e of this.dataList)this.followUserId==e.trendsAuthor&&(e.isFollow=!0);t.success&&this.$notify({message:this.$t("home_page_follow_success"),type:"success"})}catch(t){this.$handleError.handleApiRequestException(t)}},postLikeOrDislike(t){this.token?(this.likeType=1,this.commentId="",this.likeId=t.trendsId,t.isLike?this.$throttle(this.cancelLike):this.$throttle(this.handleLike)):this.$router.push("/login")},commentLikeOrDislike(t){this.token?(this.likeType=2,this.commentId=t.commentId,this.likeId=t.trendsId,t.commentIsLike?this.$throttle(this.cancelLike):this.$throttle(this.handleLike)):this.$router.push("/login")},async cancelLike(){try{const t=await this.$api.community.cancelLike({trendsId:this.likeId,commentId:this.commentId,likeType:1,likeObj:this.commentId?2:1});if(t.success){for(const t of this.dataList)1==this.likeType?t.trendsId==this.likeId&&(t.isLike=!1,t.trendsUp=t.trendsUp-1):t.commentId==this.commentId&&(t.commentIsLike=!1,t.commentUp=t.commentUp-1);this.$notify({message:this.$t("community_cancel_success"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async handleLike(){try{const t=await this.$api.community.communityLike({trendsId:this.likeId,commentId:this.commentId,likeType:1,likeObj:this.commentId?2:1});if(t.success){for(const t of this.dataList)1==this.likeType?t.trendsId==this.likeId&&(t.isLike=!0,t.trendsUp=t.trendsUp+1):t.commentId==this.commentId&&(t.commentIsLike=!0,t.commentUp=t.commentUp+1);this.$notify({message:this.$t("community_liked_successfully"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async checkIsLikeTrends(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let i of t)e.push(i.trendsId);const s=await this.$api.community.checkIsLikeTrends({trendsIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async checkIsLikeComment(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let i of t)e.push(i.commentId);if(e.length<=0)return;const s=await this.$api.community.checkIsLikeComment({commentIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async checkIsFollow(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let i of t)e.push(i.trendsAuthor);const s=await this.$api.community.checkIsFollow({userIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async onGetList(t){try{if(this.isLoading||!this.hasMore)return;this.isLoading=!0;const a=await this.$api.community.getMyDynamic({page:this.page,size:this.size,type:2,userId:this.authorId});if(a.success){var e,s;if(null!==a&&void 0!==a&&null!==(e=a.obj)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.length){var i;const e=(null===a||void 0===a||null===(i=a.obj)||void 0===i?void 0:i.data)||[],s=await this.checkIsLikeTrends(e);for(let t of e)for(let e in s)t.trendsId==e&&(t.isLike=s[e]);const o=await this.checkIsLikeComment(e);for(let t of e)for(let e in o)t.commentId==e&&(t.commentIsLike=o[e]);const n=await this.checkIsFollow(e);for(let t of e)for(let e in n)t.trendsAuthor==e&&(t.isFollow=n[e]);e.forEach(t=>{let e=JSON.parse(t.attachContent),s=[];e&&(e.map(e=>{1===e.type?t.href=this.$utils.decodeURIComponentSafely(e.url):2===e.type?s.push(this.$getEnv("VUE_APP_ALIOSS_URL")+"/"+e.url):3===e.type&&(t.videoUrl=e.url)}),s.length&&(t.urls=s))}),this.total=a.obj.totalRows,this.dataList=t?e:this.dataList.concat(e)}a.obj.data.length==this.size?this.page=this.page+1:this.hasMore=!1,this.isLoading=!1}}catch(a){this.$handleError.handleApiRequestException(a)}}}},P=N,S=(s("f303"),Object(p["a"])(P,T,A,!1,null,"1e2c5a74",null)),j=S.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t._l(t.dataList,(function(s){return e("div",{key:s.id,staticClass:"post-box",on:{click:function(e){return e.stopPropagation(),t.goDetail(s)}}},[e("div",{staticClass:"post-box-top"},[e("div",{staticClass:"post-box-left"},[e("Avatar",{attrs:{userId:s.trendsAuthor,avatarSize:42,isShowNickname:!0,isGoPage:!1,nicknameBoxStyle:"margin-left:10px;font-size:14px"}},[e("div",{staticClass:"time",attrs:{slot:"bottom"},slot:"bottom"},[t._v(t._s(t._f("relativeTime")(s.created)))])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.token,expression:"token"}]},[s.trendsAuthor==t.userInfo.customerId?e("DeletePost",{attrs:{deleteId:s.id},on:{confirm:function(e){return t.confirm(t.index)}}}):e("Report",{attrs:{item:s,"is-post":!0}})],1)]),e("div",{staticClass:"post-box-content"},[s.content?e("EditParse",{attrs:{content:s.content,isHide:!0}}):t._e()],1),s.urls?e("div",{staticClass:"imgBox"},[e("Album",{attrs:{imgs:s.urls}})],1):t._e(),s.videoUrl?e("div",{staticClass:"post-video",on:{click:function(t){t.stopPropagation()}}},[e("video",{staticClass:"video",attrs:{controls:"controls",src:s.videoUrl,id:s.id},on:{play:function(e){return t.handlePlay(s.id)}}})]):t._e(),s.href?e("div",{staticClass:"post-link"},[e("img",{staticClass:"link-img",attrs:{src:t.handleLink(s.attachContent).imgUrl||t.base64Avatar}}),e("div",[t.handleLink(s.attachContent).title?e("div",{staticClass:"link-title"},[t._v(t._s(t.handleLink(s.attachContent).title))]):t._e(),t.handleLink(s.attachContent).description?e("div",{staticClass:"link-des"},[t._v(t._s(t.handleLink(s.attachContent).description))]):t._e(),t.handleLink(s.attachContent).description?t._e():e("div",[t._v(t._s(s.href.trim()))])])]):t._e(),e("div",{staticClass:"post-box-bottom"},[e("div",{staticClass:"post-box-bottom-item",on:{click:function(e){return e.stopPropagation(),t.postLikeOrDislike(s,1)}}},[e("svg-icon",{class:{select:s.isLike},attrs:{data_iconName:"awesome",className:"follow-icon",size:16}}),e("span",{staticClass:"iconNum"},[t._v(t._s(s.trendsUp))])],1),e("div",{staticClass:"post-box-bottom-item"},[e("svg-icon",{attrs:{data_iconName:"comment1",className:"follow-icon",size:16}}),e("span",{staticClass:"iconNum"},[t._v(t._s(s.trendsComments))])],1),e("div",{staticClass:"post-box-bottom-item"})])])})),0==t.dataList.length?e("div",{staticClass:"empty-box"},[e("el-empty",{staticStyle:{"min-height":"563px"},attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}})],1):e("div",{staticClass:"load-more"},[t._v(t._s(t.total===t.dataList.length?t.$t("notice_copy_over"):t.$t("notice_copy_load_more"))+" ")])],2)},z=[],R={name:"activity",components:{Album:w["a"]},props:{authorId:{type:Number,default:0}},data(){return{page:1,size:10,total:0,dataList:[],hasMore:!0,isLoading:!1,videoElement:[],likeId:"",commentId:"",followUserId:"",base64Avatar:""+s("69a8")}},mounted(){this.videoElement=document.getElementsByTagName("video")},computed:{...Object(r["d"])({userInfo:t=>t.userInfo,token:"token"})},methods:{confirm(t){this.dataList.splice(t,1)},handlePlay(t){let e=document.getElementById(t).id;const s=this.videoElement;if(s&&s.length>0)for(let i=0;i<s.length;i++){let t=s[i].id;t===e?this.videoElement[i].play():this.videoElement[i].pause()}},handleLink(t){try{const e=JSON.parse(t),s=e[0];return s.urlWebCard?s.urlWebCard:{}}catch(e){console.warn(e)}},goDetail(t){3!=t.trendsStatus?this.$router.push(`/community/community-post/${t.trendsId}/${t.trendsAuthor}`):this.$notify({message:this.$t("community_post_delete"),type:"warning"})},goCommentDetail(t){3!=t.commentStatus?this.$router.push(`/community/reply/${t.commentId}/${t.commentAuthor}`):this.$notify({message:this.$t("community_comment_delete"),type:"warning"})},onFollowClick(t){this.token?(this.followUserId=t.trendsAuthor,t.isFollow?this.$throttle(this.cancelFollow):this.$throttle(this.follow)):this.$router.push("/login")},async cancelFollow(){try{const t=await this.$api.community.cancelFollow({followUserId:this.followUserId});if(t.success){for(const t of this.dataList)this.followUserId==t.trendsAuthor&&(t.isFollow=!1);this.$notify({message:this.$t("home_page_cancle_follow_success"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async follow(){try{const t=await this.$api.community.follow({followUserId:this.followUserId});for(const e of this.dataList)this.followUserId==e.trendsAuthor&&(e.isFollow=!0);t.success&&this.$notify({message:this.$t("home_page_follow_success"),type:"success"})}catch(t){this.$handleError.handleApiRequestException(t)}},postLikeOrDislike(t,e){this.token?2==e?(this.commentId=t.commentId,this.likeId=t.trendsId,t.isCommentLike?this.$throttle(this.cancelLike):this.$throttle(this.handleLike)):(this.commentId="",this.likeId=t.trendsId,t.isLike?this.$throttle(this.cancelLike):this.$throttle(this.handleLike)):this.$router.push("/login")},async cancelLike(){try{const t=await this.$api.community.cancelLike({trendsId:this.likeId,commentId:this.commentId,likeType:1,likeObj:this.commentId?2:1});if(t.success){for(const t of this.dataList)t.trendsId!=this.likeId||this.commentId?(t.isCommentLike=!1,t.commentUp=t.commentUp-1):(t.isLike=!1,t.trendsUp=t.trendsUp-1);this.$notify({message:this.$t("community_cancel_success"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async checkIsLikeTrends(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let i of t)e.push(i.trendsId);const s=await this.$api.community.checkIsLikeTrends({trendsIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async checkIsLikeComment(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let i of t)i.commentId&&e.push(i.commentId);if(e.length<=0)return;const s=await this.$api.community.checkIsLikeComment({commentIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async checkIsFollow(t){try{if(!this.token)return;const e=[];if(t&&t.length>0)for(let i of t)e.push(i.trendsAuthor);const s=await this.$api.community.checkIsFollow({userIds:String(e)});return s.obj}catch(e){this.$handleError.handleApiRequestException(e)}},async handleLike(){try{const t=await this.$api.community.communityLike({trendsId:this.likeId,commentId:this.commentId,likeType:1,likeObj:this.commentId?2:1});if(t.success){for(const t of this.dataList)t.trendsId!=this.likeId||this.commentId?(t.isCommentLike=!0,t.commentUp=t.commentUp+1):(t.isLike=!0,t.trendsUp=t.trendsUp+1);this.$notify({message:this.$t("community_liked_successfully"),type:"success"})}}catch(t){this.$handleError.handleApiRequestException(t)}},async onGetList(t){try{if(this.isLoading||!this.hasMore)return;this.isLoading=!0;const a=await this.$api.community.getMyDynamic({page:this.page,size:this.size,type:1,userId:this.authorId});if(a.success){var e,s;if(null!==a&&void 0!==a&&null!==(e=a.obj)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.length){var i;const e=(null===a||void 0===a||null===(i=a.obj)||void 0===i?void 0:i.data)||[];if(e.length>0){const t=await this.checkIsLikeTrends(e);for(let a of e)for(let e in t)a.trendsId==e&&(a.isLike=t[e]);const s=await this.checkIsLikeComment(e);for(let a of e)for(let t in s)a.commentId==t&&(a.isCommentLike=s[t]);const i=await this.checkIsFollow(e);for(let a of e)for(let t in i)a.trendsAuthor==t&&(a.isFollow=i[t])}this.total=a.obj.totalRows,this.dataList=t?e:this.dataList.concat(e),this.dataList.forEach(t=>{let e=JSON.parse(t.attachContent),s=[];e&&(e.map(e=>{1===e.type?t.href=this.$utils.decodeURIComponentSafely(e.url):2===e.type?s.push(this.$getEnv("VUE_APP_ALIOSS_URL")+"/"+e.url):3===e.type&&(t.videoUrl=e.url)}),s.length&&(t.urls=s))})}a.obj.data.length==this.size?this.page=this.page+1:this.hasMore=!1,this.isLoading=!1}}catch(a){this.$handleError.handleApiRequestException(a)}}}},O=R,D=(s("93d4"),Object(p["a"])(O,U,z,!1,null,"5e9fa672",null)),F=D.exports,M=s("875e"),q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home_page_position")))]),e("div",{staticClass:"pagination"},[e("div",{on:{click:t.previousPage}},[e("svg-icon",{attrs:{data_iconName:"return1",className:1==t.page?"return-icon-nomore":"return-icon",size:16}})],1),e("div",{on:{click:t.nextPage}},[e("svg-icon",{attrs:{data_iconName:"return",className:t.hasMore?"return-icon":"return-icon-nomore",size:16}})],1)])]),e("div",{staticClass:"tab-box"},[e("div",{staticClass:"tab-item",class:1==t.currentTab?"current":"",on:{click:function(e){return t.tabClick(1)}}},[t._v(t._s(t.$t("home_page_current")))]),e("div",{staticClass:"tab-item",class:2==t.currentTab?"current":"",on:{click:function(e){return t.tabClick(2)}}},[t._v(t._s(t.$t("home_page_history")))])]),t.dataList.length>0?e("div",{staticClass:"list"},[e("div",{staticClass:"bottom-box-content"},t._l(t.dataList,(function(s){return e("div",{key:s.id,staticClass:"bottom-box-item",style:1==s.direction?"border-color:#5DB988":"border-color:#E45360"},[e("div",{staticClass:"tip",style:1==s.direction?"background-color: #5DB988;":"background-color: #E45360;"},[t._v(t._s(1==s.direction?t.$t("trade_long"):t.$t("trade_short")))]),e("div",{staticClass:"left"},[e("div",{staticClass:"position-symbol"},[t._v(t._s(s.tradeSymbol)+t._s(t.$t("home_page_perpetual")))]),e("div",{staticClass:"position-yield"},[t._v(" "+t._s(t.$t("home_page_position_yield")))]),e("div",{staticClass:"position-number"},[t._v(t._s(s.roe||0)+"%")])]),e("div",{staticClass:"jg",style:1==s.direction?"border-color:#5DB988":"border-color:#E45360"}),e("div",{staticClass:"right"},[e("div",[t._v(t._s(t.$t("home_page_opening_price"))+": "),e("span",{staticClass:"text"},[t._v("₮ "+t._s(t._f("P")(s.entryPrice))+" ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentTab,expression:"currentTab == 1"}]},[t._v(t._s(t.$t("home_page_position_value"))+": "),e("span",{staticClass:"text"},[t._v(" ₮ "+t._s((Number(t.$utils.P(s.entryPrice))*Number(t.$utils.P(s.position))).toFix(4))+" ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentTab,expression:"currentTab == 2"}]},[t._v(t._s(t.$t("trade_Average_closing_price"))+": "),e("span",{staticClass:"text"},[t._v("₮ "+t._s(t._f("P")(s.closePrice))+" ")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentTab,expression:"currentTab == 2"}]},[t._v(t._s(t.$t("trade_Closing_Date"))+": "),e("span",{staticClass:"text"},[t._v(" "+t._s(t.$dayjs(s.closeTime).format("YYYY-MM-DD"))+" ")])]),1==t.currentTab?e("div",[t._v(t._s(t.$t("home_page_estimated_earnings"))+": "),e("profitLoss",{attrs:{item:s,position:"position"}})],1):t._e(),e("div",[t._v(t._s(t.$t("home_page_exchange"))+": "),e("span",{staticClass:"text"},[t._v(" "+t._s(t._f("exchangeName")(s.exchange))+" ")])])])])})),0)]):e("el-empty",{staticStyle:{"min-height":"500px"},attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}})],1)},B=[],G=s("b2ce"),V={props:{authorId:{type:Number,default:0}},components:{profitLoss:G["a"]},data(){return{page:1,size:4,total:0,dataList:[],currentTab:1,hasMore:!1,status:1,isLeader:!1}},watch:{authorId(){this.onCheckLeader()}},methods:{async onCheckLeader(){try{const t=await this.$api.copyTrade.checkLeaderApi({userId:this.authorId});t.success&&(this.isLeader=t.obj,this.isLeader?this.getCurrentPosition():this.pageUserPosition())}catch(t){this.$handleError.handleApiRequestException(t)}},nextPage(){this.hasMore&&(this.page=this.page+1,this.pageNation())},previousPage(){1!=this.page&&(this.page=this.page-1,this.pageNation())},tabClick(t){t!=this.currentTab&&(this.currentTab=t,this.page=1,this.pageNation())},pageNation(){1==this.currentTab?this.isLeader?this.getCurrentPosition():(this.status=1,this.pageUserPosition()):this.isLeader?this.getHistoryPositions():(this.status=2,this.pageUserPosition())},async getCurrentPosition(){try{const t=await this.$api.copyTrade.getCurrentPosition({page:this.page,limit:this.size,leaderId:this.authorId});t.success&&(this.dataList=t.obj.records,this.total=t.obj.total,this.page*this.size<this.total?this.hasMore=!0:this.hasMore=!1)}catch(t){this.$handleError.handleApiRequestException(t)}},async getHistoryPositions(){try{const t=await this.$api.copyTrade.getHistoryPositions({page:this.page,limit:this.size,leaderId:this.authorId});t.success&&(this.dataList=t.obj.records,this.total=t.obj.total,this.page*this.size<this.total?this.hasMore=!0:this.hasMore=!1)}catch(t){this.$handleError.handleApiRequestException(t)}},async pageUserPosition(){try{const t=await this.$api.copyTrade.pageUserPosition({offset:this.page,limit:this.size,status:this.status,userId:this.authorId});t.success&&(this.dataList=t.obj.records,this.total=t.obj.total,this.page*this.size<this.total?this.hasMore=!0:this.hasMore=!1)}catch(t){this.$handleError.handleApiRequestException(t)}}}},H=V,J=(s("2ca5"),Object(p["a"])(H,q,B,!1,null,"7cd84240",null)),W=J.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"top"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("home_page_follow")))]),e("div",{staticClass:"pagination"},[e("div",{on:{click:t.previousPage}},[e("svg-icon",{attrs:{data_iconName:"return1",className:1==t.page?"return-icon-nomore":"return-icon",size:16}})],1),e("div",{on:{click:t.nextPage}},[e("svg-icon",{attrs:{data_iconName:"return",className:t.hasMore?"return-icon":"return-icon-nomore",size:16}})],1)])]),t.dataList.length>0?e("div",{staticClass:"list"},t._l(t.dataList,(function(s,i){return e("div",{key:i,staticClass:"list-item"},[e("Avatar",{attrs:{userId:s.followUserId,avatarSize:42,isShowNickname:!0,isGoPage:!1,nicknameBoxStyle:"margin-left:10px;font-size:14px;"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.IsSelf,expression:"IsSelf"}],staticClass:"btn",on:{click:function(e){return t.cancleLike(s.followUserId)}}},[t._v(t._s(t.$t("home_page_unfollow")))])],1)})),0):e("el-empty",{staticStyle:{"min-height":"500px"},attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}})],1)},X=[],Y={props:{authorId:{type:Number,default:0}},data(){return{page:1,size:6,total:0,dataList:[],hasMore:!1,showDialog:!1,followUserId:""}},computed:{IsSelf(){return this.authorId==this.$store.state.userInfo.customerId}},mounted(){},watch:{authorId(){this.getFollows()}},methods:{nextPage(){this.hasMore&&(this.page=this.page+1,this.getFollows())},previousPage(){1!=this.page&&(this.page=this.page-1,this.getFollows())},cancleLike(t){this.$confirm(this.$t("home_page_not_follow"),{confirmButtonText:this.$t("home_page_not_confirm"),cancelButtonText:this.$t("home_page_not_cancle"),type:"warning"}).then(()=>{this.cancelFollow(t)})},async cancelFollow(t){try{const e=await this.$api.community.cancelFollow({followUserId:t});e.success&&(this.getFollows(),this.$notify({message:this.$t("home_page_cancle_follow_success"),type:"success"}))}catch(e){this.$handleError.handleApiRequestException(e)}},async getFollows(){try{const t=await this.$api.community.getFollows({page:this.page,size:this.size,userId:this.authorId});t.success&&t.obj.records&&(this.total=t.obj.total,this.dataList=t.obj.records,this.page*this.size<this.total&&(this.hasMore=!0))}catch(t){this.$handleError.handleApiRequestException(t)}}}},Q=Y,Z=(s("303e"),Object(p["a"])(Q,K,X,!1,null,"253cdace",null)),tt=Z.exports,et={name:"home-page",components:{HomePageHeader:k,Activity:E,Comment:j,Like:F,Follow:M["a"],Position:W,AttentionList:tt},data(){return{searchVal:"",tabList:[],currentTabIndex:"1",authorId:0,teamInfo:{},isLeader:!1,exchange:"okx",isLeaderArr:[]}},async mounted(){this.authorId=Number(this.$route.query.authorId),this.onCheckLeader(),window.addEventListener("scroll",this.scrollBottom)},destroyed(){window.removeEventListener("scroll",this.scrollBottom)},watch:{async $route(){this.authorId=Number(this.$route.query.authorId),await this.onCheckLeader()}},methods:{...Object(r["c"])(["UPDATE_MASK_SEARCH"]),scrollBottom(){let t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.scrollHeight||document.body.scrollHeight;e-t<=1e3&&(1==this.currentTabIndex?this.$refs.activity.onGetList(!1):2==this.currentTabIndex?this.$refs.like.onGetList(!1):3==this.currentTabIndex&&this.$refs.comment.onGetList(!1))},toggleExchange(t){this.exchange=t.toLocaleLowerCase(),this.onGetTeamInfo(),this.$refs.follow.exchange=this.exchange,this.$refs.follow.memberPage()},async onGetTeamInfo(){const t=await this.$api.copyTrade.fctTeamList({offset:0,limit:10,status:1,leader:this.authorId,exchange:this.exchange});var e,s;t.success&&(null!==t&&void 0!==t&&null!==(e=t.obj)&&void 0!==e&&null!==(s=e.records)&&void 0!==s&&s.length&&(this.teamInfo=t.obj.records[0]))},async onCheckLeader(){try{this.isLeaderArr=[];const t=await this.$api.copyTrade.checkLeaderApi({userId:this.authorId,exchange:"binance"}),e=await this.$api.copyTrade.checkLeaderApi({userId:this.authorId,exchange:"okx"});t.success&&e.success&&(this.isLeader=t.obj||e.obj,t.obj&&this.isLeaderArr.push({name:"binance",text:"BN",key:t.obj}),e.obj&&this.isLeaderArr.push({name:"okx",text:"OKX",key:e.obj}),t.obj?this.exchange="binance":e.obj&&(this.exchange="okx"),this.isLeader?(this.onGetTeamInfo(),this.tabList=[{name:this.$t("trade_follower"),id:"0"},{name:this.$t("home_page_tab2"),id:"1"},{name:this.$t("home_page_tab3"),id:"2"},{name:this.$t("home_page_tab4"),id:"3"}]):(this.currentTabIndex="1",this.tabList=[{name:this.$t("home_page_tab2"),id:"1"},{name:this.$t("home_page_tab3"),id:"2"},{name:this.$t("home_page_tab4"),id:"3"}]),this.tabClick())}catch(t){this.$handleError.handleApiRequestException(t)}},focus(){this.UPDATE_MASK_SEARCH(!0)},async tabClick(){0==this.currentTabIndex?this.$refs.follow.memberPage():1==this.currentTabIndex?(this.$refs.activity.isLoading=!1,this.$refs.activity.hasMore=!0,this.$refs.activity.page=1,this.$refs.activity.onGetList(!0)):2==this.currentTabIndex?(this.$refs.like.isLoading=!1,this.$refs.like.hasMore=!0,this.$refs.like.page=1,this.$refs.like.onGetList(!0)):3==this.currentTabIndex&&(this.$refs.comment.isLoading=!1,this.$refs.comment.hasMore=!0,this.$refs.comment.page=1,this.$refs.comment.onGetList(!0))}}},st=et,it=(s("a5a8"),Object(p["a"])(st,i,a,!1,null,"7e7eb622",null));e["default"]=it.exports},"7dfc":function(t,e,s){},"82df":function(t,e,s){},8575:function(t,e,s){"use strict";s("c1d4")},"875e":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[t.memberList.length>0?e("div",{staticClass:"box"},t._l(t.memberList,(function(s){return e("div",{key:s.id,staticClass:"box-item"},[e("div",{staticClass:"box-top"},[e("Avatar",{attrs:{userId:s.userId,avatarSize:42,isShowNickname:!0,nicknameBoxStyle:"margin-left:10px;font-size:14px"}},[e("div",{staticClass:"time",attrs:{slot:"bottom"},slot:"bottom"},[t._v(t._s(t.$t("home_page_follow_time"))+t._s(t._f("relativeTime")(s.created)))])]),t.authorId==t.userInfo.customerId&&t.isLeader?e("div",{class:"btn red",on:{click:function(e){return t.remove(s)}}},[t._v(" "+t._s(t.$t("trade_remove")))]):t._e()],1),e("div",{staticClass:"box-bottom"},[e("div",{staticClass:"box-bottom-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("trade_principal")))]),e("div",{staticClass:"value"},[t._v("₮"+t._s(t._f("P")(s.copyAsset)))])]),e("div",{staticClass:"box-bottom-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("trade_Number_of_copies")))]),e("div",{staticClass:"value"},[t._v(t._s(s.totalCopyOrders||0))])]),e("div",{staticClass:"box-bottom-item"},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("community_total_revenue")))]),e("div",{staticClass:"value"},[t._v("₮"+t._s(t._f("P")(s.totalProfit)))])]),e("div",{staticClass:"box-bottom-item",staticStyle:{"text-align":"right"}},[e("div",{staticClass:"label"},[t._v(t._s(t.$t("trade_30_Day_Yield")))]),e("div",{staticClass:"value"},[t._v(t._s(s.profitRate30d?s.profitRate30d:0)+"%")])])])])})),0):e("el-empty",{staticStyle:{"min-height":"500px"},attrs:{image:s("e335"),"image-size":133,description:t.$t("notice_no_data")}}),e("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[e("el-pagination",{attrs:{"hide-on-single-page":!0,"page-size":t.size,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)},a=[],o=s("2f62"),n={props:{authorId:{type:Number,default:0},isLeader:{type:Boolean},isLeaderArr:{type:Array}},data(){return{exchange:"binance",memberList:[],teamId:"",userId:"",showDialog:!1,page:1,size:6,total:0}},mounted(){},computed:{...Object(o["d"])({userInfo:t=>t.userInfo})},watch:{isLeaderArr(t){for(const e of t){if("binance"==e.name&&e.key)return this.exchange="binance",void this.memberPage();"okx"==e.name&&e.key&&(this.exchange="okx",this.memberPage())}}},methods:{async handleCurrentChange(t){this.page=t,await this.memberPage(),window.scrollTo(0,0)},remove(t){this.showDialog=!0,this.$confirm(this.$t("home_page_is_remove"),{confirmButtonText:this.$t("home_page_not_confirm"),cancelButtonText:this.$t("home_page_not_cancle"),type:"warning"}).then(()=>{this.teamId=t.teamId,this.userId=t.userId,this.outMember()})},async outMember(){const t=await this.$api.copyTrade.outMember({teamId:this.teamId,userId:this.userId});t.success&&(this.memberPage(),this.$message({type:"success",message:this.$t(t.code)}))},async memberPage(){const t=await this.$api.copyTrade.memberPage({pageNo:1,limit:this.size,userId:this.authorId,exchange:this.exchange,status:1});t.success&&(this.memberList=t.obj,t.obj.length>0&&(this.totalSize=t.obj[0].totalSize))}}},r=n,c=(s("cafa4"),s("2877")),l=Object(c["a"])(r,i,a,!1,null,"8adb19b6",null);e["a"]=l.exports},"907e":function(t,e,s){},"93d4":function(t,e,s){"use strict";s("33bc")},9977:function(t,e,s){"use strict";s("2ef1")},"9d9d":function(t,e,s){},a5a8:function(t,e,s){"use strict";s("82df")},b2ce:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("span",{staticStyle:{color:"var(--color-text-one)"}},[t._v(" "+t._s(t.estimatedRevenue)+" ")])},a=[],o=s("bc3a"),n=s.n(o),r={props:{item:{type:Object,default:()=>({})},position:{type:String,default:"userPositionValue"}},data(){return{estimatedRevenue:""}},mounted(){this.binanceApiGet(this.position)},destroyed(){this.intervalTime&&(clearInterval(this.intervalTime),this.intervalTime=null)},methods:{async binanceApiGet(t="userPositionValue"){this.intervalTime&&(clearInterval(this.intervalTime),this.intervalTime=null),this.binanceData(t),this.intervalTime=setInterval(()=>{this.binanceData(t)},5e3)},async binanceData(t){let e=0;const{item:s}=this;if("okx"===this.item.exchange){const t=await this.$api.copyTrade.oKmarkPrice({instType:"SWAP",instId:s.tradeSymbol+"-SWAP"});0!==t.data.length&&(e=t.data[0].markPx)}else{const t=await n.a.get("https://fapi.binance.com/fapi/v1/premiumIndex?symbol="+s.tradeSymbol);e=t.data.markPrice}let i;i=1==s.direction?(e-this.$utils.P(s.entryPrice))*this.$utils.P(s[t]):(this.$utils.P(s.entryPrice)-e)*this.$utils.P(s[t]),i=Math.floor(1e4*i)/1e4,this.estimatedRevenue=i}}},c=r,l=s("2877"),h=Object(l["a"])(c,i,a,!1,null,null,null);e["a"]=h.exports},c1d4:function(t,e,s){},cafa4:function(t,e,s){"use strict";s("907e")},d31a:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("el-radio-group",{on:{change:t.toggleExchange},model:{value:t.exchangeName,callback:function(e){t.exchangeName=e},expression:"exchangeName"}},t._l(t.exchangeNameList,(function(t,s){return e("el-radio-button",{key:s,attrs:{label:t}})})),1)],1)},a=[],o=(s("14d9"),s("2f62")),n=s("557f");const r=n["a"];var c={name:"ExchangeTadios",props:{type:{type:String,default:"0"},authorId:{type:[Number,String],default:0}},computed:{...Object(o["d"])(["userInfo"]),...Object(o["d"])({exchange:t=>t.trade.exchange,exchangeList:t=>t.trade.exchangeList})},data(){return{exchangeName:"",exchangeNameList:[]}},async mounted(){switch(console.log(this.type),this.type){case"0":return this.exchangeNameList=[r[0].name,r[1].name],this.exchangeName=r[0].name,void this.toggleExchange(this.exchangeName);case"1":return void this.getexchangeList();case"2":return 0===this.exchangeList.length&&await this.GET_API_EXCHANGE(this.authorId),this.exchangeNameList=this.exchangeList,this.exchangeName=this.exchange,void this.toggleExchange(this.exchange);default:return void console.log(111)}},methods:{...Object(o["b"])(["GET_API_EXCHANGE"]),...Object(o["c"])(["SET_EXCHANGE"]),async getexchangeList(){const t=await this.$api.copyTrade.checkLeaderApi({userId:this.authorId,trade:1,exchange:r[0].key}),e=await this.$api.copyTrade.checkLeaderApi({userId:this.authorId,trade:1,exchange:r[1].key}),s=[];t.success&&e.success&&(t.obj&&s.push(r[0].name),e.obj&&s.push(r[1].name),this.exchangeNameList=s,this.exchangeName=s[0],this.toggleExchange(this.exchangeName))},toggleExchange(t){this.$emit("change",t)}}},l=c,h=(s("d5c0"),s("2877")),d=Object(h["a"])(l,i,a,!1,null,"9a7b0220",null);e["a"]=d.exports},d5c0:function(t,e,s){"use strict";s("634d")},e335:function(t,e,s){t.exports=s.p+"img/list.e55dcec1.png"},f303:function(t,e,s){"use strict";s("572c")},f4053:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"album-warp"},t._l(t.imgs,(function(s){return e("el-image",{key:s,class:"img-box "+t.className,attrs:{fit:"cover","preview-src-list":t.imgs,src:s},on:{click:function(t){t.stopPropagation()}}})})),1)},a=[],o={props:{imgs:{type:Array,default:()=>[]}},computed:{className(){let t="img-box-i";return 4===this.imgs.length||2===this.imgs.length?t="img-box-4":1===this.imgs.length&&(t="img-box-1"),t}},name:"Album"},n=o,r=(s("8575"),s("2877")),c=Object(r["a"])(n,i,a,!1,null,"4cc656a1",null);e["a"]=c.exports},fe6a:function(t,e,s){"use strict";s("9d9d")}}]);