(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11e2d57b"],{"39df":function(e,t,i){},"3fc3":function(e,t,i){},"6eca":function(e,t,i){"use strict";i("39df")},"7c43":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flag-dropdown"},[t("div",{staticClass:"selected-flag",on:{click:e.toggleCountryNum}},[t("div",{class:e.classFlag}),t("div",{staticClass:"arrow",class:!0===e.cur?"up":"",on:{click:e.toggleCountryNum}}),t("div",{staticClass:"dail-txt",attrs:{title:e.countryNumber}},[e._v(" "+e._s(e.countryNumber)+" ")])]),e.cur?t("ul",{staticClass:"country-list"},[t("div",{staticClass:"search-box"},[e._m(0),t("el-input",{ref:"input",attrs:{placeholder:e.$t("assets_search")},on:{input:e.searchInput,blur:e.btnBlur},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),e._l(e.option,(function(i,s){return t("li",{key:s,staticClass:"country",on:{click:function(t){return e.select(i)}}},[t("div",{class:i.classTog}),t("span",{staticClass:"country-name"},[e._v(e._s(i.content))]),t("span",{staticClass:"dial-code"},[e._v(e._s(i.countryNum))])])}))],2):e._e()])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-box-left"},[t("span",{staticClass:"iconfont iconsousuo"})])}],o=(i("14d9"),i("2f62")),r=(i("e825"),{name:"countryList",data(){return{classFlag:"flag cn",countryName:"China (中国)",countryNumber:"+86",cur:!1,countryicon:[],searchVal:"",option:[],langCode:"cn"}},props:{disabled:{type:Boolean,default:!1}},computed:{...Object(o["d"])({userInfo:"userInfo"})},mounted(){if(this.countryicon=this.langUtil.intelTel(),this.option=this.countryicon,this.userInfo.countryName){this.langCode=this.userInfo.countryName;for(const e of this.countryicon)this.langCode==e.langCode&&(this.countryNumber=e.countryNum,this.classFlag=e.classTog,this.countryName=e.langCode,this.$emit("confirm",e))}},methods:{toggleCountryNum(){this.disabled||(this.cur=!this.cur,this.cur&&this.$nextTick(()=>{this.$refs.input.focus()}))},btnBlur(){setTimeout(()=>{this.cur=!1},300)},select(e){this.countryNumber=e.countryNum,this.classFlag=e.classTog,this.countryName=e.content,this.cur=!1,this.$emit("confirm",e)},searchInput(e){if(this.searchVal){let t=[];for(const i of this.countryicon)(i.content.toUpperCase().includes(e.toUpperCase())||i.countryNum.toUpperCase().includes(e.toUpperCase()))&&t.push(i);this.option=t}else this.option=this.countryicon}}}),a=r,c=(i("6eca"),i("2877")),l=Object(c["a"])(a,s,n,!1,null,"b53f2e3c",null);t["a"]=l.exports},b953:function(e,t,i){"use strict";i.r(t);i("14d9");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"login-box"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("login_title")))]),t("div",{staticClass:"tabs-box"},[t("div",{staticClass:"tabs-item",class:1==e.registerType?"tabs-item-bold":"",on:{click:function(t){return e.selectLoginType(1)}}},[e._v(" "+e._s(e.$t("register_phone"))+" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.registerType,expression:"registerType == 1"}],staticClass:"line"})]),t("div",{staticClass:"tabs-item",class:2==e.registerType?"tabs-item-bold":"",on:{click:function(t){return e.selectLoginType(2)}}},[e._v(" "+e._s(e.$t("register_email"))+" "),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.registerType,expression:"registerType == 2"}],staticClass:"line"})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.registerType,expression:"registerType == 1"}],staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("login_phone_number")))]),t("div",{staticClass:"select-box"},[t("el-input",{attrs:{placeholder:e.$t("login_phone_placeholder"),maxlength:"11"},model:{value:e.phoneNum,callback:function(t){e.phoneNum=t},expression:"phoneNum"}},[t("template",{slot:"prepend"},[t("countryList",{on:{confirm:e.countrySelect}})],1)],2)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.registerType,expression:"registerType == 2"}],staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("login_email_number")))]),t("div",{staticClass:"select-box"},[t("el-input",{attrs:{placeholder:e.$t("login_email_placeholder")},model:{value:e.emailNum,callback:function(t){e.emailNum=t},expression:"emailNum"}})],1)]),t("div",{staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("register_setpwd")))]),t("el-input",{attrs:{placeholder:e.$t("register_setpwd_placeholder"),"show-password":"",autocomplete:"new-password",maxlength:"20"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFormSubmitClick.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("div",{staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("register_confirm_pwd")))]),t("el-input",{attrs:{placeholder:e.$t("register_confirm_placeholder"),"show-password":"",autocomplete:"new-password",maxlength:"20"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFormSubmitClick.apply(null,arguments)}},model:{value:e.confirmPwd,callback:function(t){e.confirmPwd=t},expression:"confirmPwd"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.registerType,expression:"registerType == 1"}],staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("register_phone_verify")))]),t("el-input",{attrs:{placeholder:e.$t("register_verify_placeholder"),maxlength:"6"},model:{value:e.registSmsCode,callback:function(t){e.registSmsCode=t},expression:"registSmsCode"}},[t("span",{style:e.isPhoneVerifyCodeLoading?"cursor: default;":"cursor: pointer;",attrs:{slot:"suffix"},on:{click:e.handleGetRegistSmsCode},slot:"suffix"},[e._v(e._s(e.phoneVerifyTips))])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.registerType,expression:"registerType == 2"}],staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("register_email_verify")))]),t("el-input",{attrs:{placeholder:e.$t("register_email_verify_placeholder"),maxlength:"6"},model:{value:e.emailCode,callback:function(t){e.emailCode=t},expression:"emailCode"}},[t("span",{style:e.isPhoneVerifyCodeLoading?"cursor: default;":"cursor: pointer;",attrs:{slot:"suffix"},on:{click:e.handleGetEmailCode},slot:"suffix"},[e._v(e._s(e.phoneVerifyTips))])])],1),t("div",{staticClass:"input-box"},[t("div",{staticClass:"input-title"},[e._v(e._s(e.$t("register_invite_code")))]),t("el-input",{attrs:{placeholder:e.$t("register_optional")},model:{value:e.inviteCode,callback:function(t){e.inviteCode=t},expression:"inviteCode"}})],1),t("div",{staticClass:"btn",on:{click:e.handleFormSubmitClick}},[e._v(" "+e._s(e.$t("register_btn1"))+" ")]),t("div",{staticClass:"login-bottom"},[t("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[t("div",[t("p",{staticStyle:{color:"var(--color-text-one)"}},[e._v(e._s(e.$t("register_agree"))+" ")]),t("p",{staticClass:"yellow",on:{click:function(t){return t.stopPropagation(),e.outLink.apply(null,arguments)}}},[e._v(e._s(e.$t("login_terms"))+" ")])])]),t("div",{staticClass:"login-bottom-right"},[t("p",[e._v(e._s(e.$t("register_have_account"))+" ")]),t("p",{staticClass:"yellow",on:{click:()=>{e.$router.push("/login")}}},[e._v(e._s(e.$t("register_login_now"))+" ")])])],1)]),t("div",{attrs:{id:"captcha2"}})])},n=[],o=i("7c43"),r=i("9923"),a=i("2f62"),c={name:"register",components:{countryList:o["a"]},data(){return{registerType:1,countryNumber:"+86",phoneNum:"",emailNum:"",password:"",confirmPwd:"",registSmsCode:"",emailCode:"",inviteCode:"",checked:!1,validateRes:null,captchaObj:null,langCode:"cn",isPhoneVerifyCodeLoading:!1,phoneVerifyTips:this.$t("getVerificationCode_register"),phoneVerifyCount:120}},computed:{...Object(a["d"])({appConfig:e=>e.appSessionStatus.appConfig,siteConfig:e=>e.appSessionStatus.siteConfig})},async mounted(){try{this.appConfig.isUpdated||await this.$store.dispatch("GET_APP_CONFIG")}catch(t){this.$handleError.handleApiRequestException(t)}this.inviteCode=this.$route.query.inviteCode;const e=this.$route.query.account;e&&e.includes("@")?(this.registerType=2,this.emailNum=e):this.phoneNum=e,this.initGeetest()},methods:{countrySelect(e){this.countryNumber=e.countryNum,this.langCode=e.langCode},selectLoginType(e){this.registerType=e,this.isPhoneVerifyCodeLoading=!1},outLink(){window.open(this.siteConfig.userAgreement)},async handleGetRegistSmsCode(){if(!this.isPhoneVerifyCodeLoading)return this.phoneNum?void(this.appConfig.isOpenGeetest?this.captchaObj?this.captchaObj.verify():this.$notify({type:"warning",message:this.$t("refresh_register")}):this.handleRegistSmsCode()):this.$notify({type:"warning",message:this.$t("phoneNO_register")})},async handleRegistSmsCode(){if("+86"==this.countryNumber&&!this.$validator.isMobilePhone(this.phoneNum,"zh-CN"))return this.$notify({type:"warning",message:this.$t("phoneNumber_register")});try{const e=await this.$api.register.registSmsCode({country:this.countryNumber,mobile:this.phoneNum,...this.validateRes});e.success?(this.$notify({type:"success",message:this.$t(e.code)}),this.isPhoneVerifyCodeLoading=!0,this.phoneVerifyInterval=setInterval(()=>{this.phoneVerifyTips=this.phoneVerifyCount+"s",0===this.phoneVerifyCount?(this.isPhoneVerifyCodeLoading=!1,this.phoneVerifyTips=this.$t("resend_register"),this.phoneVerifyCount=120,clearInterval(this.phoneVerifyInterval)):this.phoneVerifyCount--},1e3)):this.isPhoneVerifyCodeLoading=!1}catch(e){this.isPhoneVerifyCodeLoading=!1,this.$handleError.handleApiRequestException(e)}},async initGeetest(){try{const e=await this.$api.login.initGeetest();window.initGeetest({gt:e.gt,challenge:e.challenge,offline:!e.success,new_captcha:!0,product:"bind",width:"100%",lang:Object(r["b"])()},e=>{this.captchaObj=e,e.appendTo("#captcha2"),e.onReady(()=>{}).onSuccess(()=>{this.validateRes=e.getValidate(),1==this.registerType?this.handleRegistSmsCode():2==this.registerType&&this.sendRegisterEmailCode()}).onError(()=>{})})}catch(e){this.$handleError.handleApiRequestException(e)}},async handleRegByPhone(){const e=this.$md5(this.password+"hello, moto");try{const t=await this.$api.register.userRegByPhone({mobile:this.phoneNum,password:e,registSmsCode:this.registSmsCode,country:this.countryNumber,referralCode:this.inviteCode||"",countryName:this.langCode});t.success&&(this.$notify({type:"success",message:this.$t(t.code)}),t.obj&&t.obj[1]&&(this.activityInfo={rewardNum:t.obj[1].rewardNum}),this.$router.replace("/login"))}catch(t){this.$handleError.handleApiRequestException(t)}},async handleGetEmailCode(){if(!this.isPhoneVerifyCodeLoading)return this.$validator.isEmail(this.emailNum)?void(this.appConfig.isOpenGeetest?this.captchaObj?this.captchaObj.verify():this.$notify({type:"warning",message:this.$t("refresh_register")}):this.sendRegisterEmailCode()):this.$notify({type:"warning",message:this.$t("邮箱格式不正确")})},async sendRegisterEmailCode(){try{const e=await this.$api.register.sendRegisterEmailCode({email:this.emailNum,langCode:"zh_CN",...this.validateRes});e.success?(this.isPhoneVerifyCodeLoading=!0,this.phoneVerifyInterval=setInterval(()=>{this.phoneVerifyTips=this.phoneVerifyCount+"s",0===this.phoneVerifyCount?(this.isPhoneVerifyCodeLoading=!1,this.phoneVerifyTips=this.$t("resend_register"),this.phoneVerifyCount=120,clearInterval(this.phoneVerifyInterval)):this.phoneVerifyCount--},1e3),this.$notify({message:this.$t(e.code),type:"success"})):this.isPhoneVerifyCodeLoading=!1}catch(e){this.isPhoneVerifyCodeLoading=!1,this.$handleError.handleApiRequestException(e)}},async handleRegByEmail(){const e=this.$md5(this.password+"hello, moto");try{const t=await this.$api.register.emailCodeRegister({email:this.emailNum,password:e,emailCode:this.emailCode,referralCode:this.inviteCode||"",langCode:"zh_CN"});t.success&&(this.$notify({type:"success",message:this.$t(t.code)}),this.$router.replace("/login"))}catch(t){this.$handleError.handleApiRequestException(t)}},async handleFormSubmitClick(){if(1==this.registerType){if("+86"==this.countryNumber){if(!this.$validator.isMobilePhone(this.phoneNum,"zh-CN"))return this.$notify({type:"warning",message:this.$t("phoneNumber_register")});if(!this.$input.passwordVerification(this.password))return this.$notify({type:"warning",message:this.$t("pwdLength_register")});if(this.password!==this.confirmPwd)return this.$notify({type:"warning",message:this.$t("inconsistent_register")});if(!this.registSmsCode)return this.$notify({type:"warning",message:this.$t("SMSCode_register")});if(!this.checked)return this.$notify({type:"warning",message:this.$t("register_service")})}this.handleRegByPhone()}else if(2==this.registerType){if(!this.$input.emailVerification(this.emailNum))return this.$notify({type:"warning",message:this.$t("mailbox_register")});if(!this.$input.passwordVerification(this.password))return this.$notify({type:"warning",message:this.$t("pwdLength_register")});if(this.password!==this.confirmPwd)return this.$notify({type:"warning",message:this.$t("inconsistent_register")});if(!this.checked)return this.$notify({type:"warning",message:this.$t("register_service")});this.handleRegByEmail()}}}},l=c,h=(i("e515"),i("2877")),u=Object(h["a"])(l,s,n,!1,null,"860029e6",null);t["default"]=u.exports},e515:function(e,t,i){"use strict";i("3fc3")},e825:function(e,t,i){}}]);